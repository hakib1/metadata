<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:xs="http://www.w3.org/2001/XMLSchema"
    exclude-result-prefixes="xs"
    version="2.0">
    
    <xsl:template name="licenseURIs">
        <xsl:element name="accessCondition" namespace="http://www.loc.gov/mods/v3">
            <xsl:attribute name="type">use and reproduction</xsl:attribute>
            <xsl:choose>
                <xsl:when test="contains(.,'Attribution_4.0_International')">
                    <xsl:text>http://creativecommons.org/licenses/by/4.0/</xsl:text>
                </xsl:when>
                <xsl:when test="matches(.,'Attribution-NonCommercial_4\.0_International')">
                    <xsl:text>http://creativecommons.org/licenses/by-nc/4.0/</xsl:text>
                </xsl:when>
                <xsl:when test="contains(.,'Attribution-NonCommercial-NoDerivs_4.0_International')">
                    <xsl:text>http://creativecommons.org/licenses/by-nc-nd/4.0/</xsl:text>
                </xsl:when>
                <xsl:when test="contains(.,'Attribution-NonCommercial-ShareAlike_4.0_International')">
                    <xsl:text>http://creativecommons.org/licenses/by-nc-sa/4.0/</xsl:text>
                </xsl:when>
                <xsl:when test="contains(.,'Attribution-ShareAlike_4.0_International')">
                    <xsl:text>http://creativecommons.org/licenses/by-sa/4.0/</xsl:text>
                </xsl:when>
                <xsl:when test="contains(.,'Attribution-Non-Commercial-No Derivatives 3.0 Unported')">
                    <xsl:text>http://creativecommons.org/licenses/by-nc-nd/3.0/</xsl:text>
                </xsl:when>
                <xsl:otherwise>
                    <xsl:value-of select="normalize-space()"/>
                </xsl:otherwise>
            </xsl:choose>
        </xsl:element>        
    </xsl:template>
    
    <xsl:variable name="conHallList" select="tokenize('
avalon:13106
avalon:13118
avalon:13110
avalon:13112
avalon:13108
avalon:13128
avalon:13130
avalon:13156
avalon:13158
avalon:13154
avalon:13207
avalon:13205
avalon:13265
avalon:4453
avalon:4451
avalon:4449
avalon:4455
avalon:4463
avalon:4461
avalon:4457
avalon:4467
avalon:4471
avalon:4465
avalon:4479
avalon:4477
avalon:4475
avalon:4483
avalon:4487
avalon:4485
avalon:4481
avalon:4489
avalon:4507
avalon:4512
avalon:4509
avalon:4517
avalon:4529
avalon:4521
avalon:4524
avalon:4527
avalon:4537
avalon:4533
avalon:4535
avalon:4531
avalon:4541
avalon:4545
avalon:4543
avalon:4539
avalon:4547
avalon:4551
avalon:4553
avalon:4549
avalon:4561
avalon:4557
avalon:4555
avalon:4569
avalon:4567
avalon:4563
avalon:4565
avalon:4573
avalon:4577
avalon:4571
avalon:4579
avalon:4583
avalon:4585
avalon:4589
avalon:4591
avalon:4593
avalon:4595
avalon:4597
avalon:4599
avalon:4601
avalon:4603
avalon:4607
avalon:4605
avalon:4609
avalon:4613
avalon:4611
avalon:4619
avalon:4615
avalon:4623
avalon:4627
avalon:4625
avalon:4635
avalon:4633
avalon:4631
avalon:4629
avalon:4643
avalon:4641
avalon:4637
avalon:4647
avalon:4649
avalon:4655
avalon:4653
avalon:4657
avalon:4659
avalon:4661
avalon:4926
avalon:4930
avalon:4923
avalon:4932
avalon:4948
avalon:5019
avalon:5017
avalon:5025
avalon:5029
avalon:5021
avalon:5036
avalon:5033
avalon:5044
avalon:5040
avalon:5042
avalon:5047
avalon:5058
avalon:5067
avalon:5072
avalon:5075
avalon:5078
avalon:5081
avalon:5087
avalon:5092
avalon:5090
avalon:5096
avalon:5100
avalon:5107
avalon:5310
avalon:5314
avalon:5316
avalon:5318
avalon:5322
avalon:5320
avalon:5328
avalon:5324
avalon:5326
avalon:5330
avalon:5336
avalon:5332
avalon:5334
avalon:5338
avalon:5346
avalon:5344
avalon:5342
avalon:5348
avalon:5340
avalon:5350
avalon:5356
avalon:5354
avalon:5352
avalon:5364
avalon:5358
avalon:5360
avalon:5362
avalon:5372
avalon:5366
avalon:5368
avalon:5370
avalon:5376
avalon:5380
avalon:5374
avalon:5378
avalon:5388
avalon:5386
avalon:5384
avalon:5382
avalon:5390
avalon:5396
avalon:5394
avalon:5392
avalon:5402
avalon:5400
avalon:5404
avalon:5398
avalon:5406
avalon:5408
avalon:5412
avalon:5410
avalon:5418
avalon:5414
avalon:5416
avalon:5420
avalon:5428
avalon:5422
avalon:5424
avalon:5426
avalon:5430
avalon:5438
avalon:5436
avalon:5432
avalon:5434
avalon:5446
avalon:5444
avalon:5440
avalon:5442
avalon:5452
avalon:5450
avalon:5448
avalon:5454
avalon:5462
avalon:5458
avalon:5460
avalon:5456
avalon:5470
avalon:5464
avalon:5466
avalon:5468
avalon:5474
avalon:5472
avalon:5476
avalon:5478
avalon:5482
avalon:5486
avalon:5480
avalon:5484
avalon:5488
avalon:5492
avalon:5494
avalon:5490
avalon:5498
avalon:5500
avalon:5496
avalon:5502
avalon:5504
avalon:5508
avalon:5510
avalon:5506
avalon:5512
avalon:5514
avalon:5516
avalon:5518
avalon:5526
avalon:5522
avalon:5524
avalon:5520
avalon:5528
avalon:5530
avalon:5534
avalon:5536
avalon:5532
avalon:5538
avalon:5544
avalon:5540
avalon:5542
avalon:5548
avalon:5546
avalon:5552
avalon:5550
avalon:5554
avalon:5558
avalon:5556
avalon:5560
avalon:5566
avalon:5562
avalon:5564
avalon:5568
avalon:5574
avalon:5572
avalon:5576
avalon:5570
avalon:5582
avalon:5584
avalon:5580
avalon:5578
avalon:5602
avalon:5600
avalon:5598
avalon:5596
avalon:5604
avalon:5902
avalon:5951
avalon:5976
avalon:5986
avalon:5998
avalon:6006
avalon:6022
avalon:6052
avalon:6065
avalon:6080
avalon:6086
avalon:6093
avalon:6105
avalon:6126
avalon:6143
avalon:6158
avalon:6173
avalon:6182
avalon:6192
avalon:6205
avalon:6212
avalon:6245
avalon:6257
avalon:6270
avalon:6287
avalon:6299
avalon:6306
avalon:6319
avalon:6326
avalon:6362
avalon:6388
avalon:6398
avalon:6418
avalon:6423
avalon:6441
avalon:6448
avalon:6462
avalon:6470
avalon:6479
avalon:6485
avalon:6514
avalon:6522
avalon:6530
avalon:6538
avalon:6549
avalon:6568
avalon:6579
avalon:6592
avalon:6622
avalon:6616
avalon:6619
avalon:6629
avalon:6639
avalon:6646
avalon:6660
avalon:6681
avalon:6693
avalon:6705
avalon:6716
avalon:6730
avalon:6750
avalon:6772
avalon:6768
avalon:6793
avalon:6801
avalon:6815
avalon:6810
avalon:6833
avalon:6848
avalon:6859
avalon:6875
avalon:6900
avalon:6916
avalon:6930
avalon:6945
avalon:6967
avalon:6987
avalon:7001
avalon:7025
avalon:7034
avalon:7054
avalon:7070
avalon:7064
avalon:7081
avalon:7099
avalon:7116
avalon:7124
avalon:7136
avalon:7144
avalon:7160
avalon:7172
avalon:7203
avalon:7222
avalon:7241
avalon:7248
avalon:7267
avalon:7261
avalon:7279
avalon:7290
avalon:7305
avalon:7322
avalon:7334
avalon:7353
avalon:7368
avalon:7385
avalon:7399
avalon:7414
avalon:7437
avalon:7446
avalon:7461
avalon:7472
avalon:7492
avalon:7504
avalon:7513
avalon:7524
avalon:7531
avalon:7552
avalon:7571
avalon:7592
avalon:7613
avalon:7652
avalon:7681
avalon:7700
avalon:7712
avalon:7729
avalon:7741
avalon:7758
avalon:4473
avalon:15796
avalon:15794
avalon:15792
avalon:15798
avalon:15802
avalon:15804
avalon:15806
avalon:15812
avalon:15820
avalon:15822
avalon:15824
avalon:15830
avalon:15832
avalon:15852
avalon:15854
avalon:15862
avalon:15864
avalon:15866
avalon:15870
avalon:15896
avalon:15900
avalon:15902
avalon:15904
avalon:15908
avalon:15910
avalon:15914
avalon:15916
avalon:15918
avalon:15920
avalon:15922
avalon:15924
avalon:15926
avalon:15928
avalon:15934
avalon:15936
avalon:15938
avalon:15940
avalon:15942
avalon:15946
avalon:15948
avalon:15950
avalon:15956
avalon:15958
avalon:15960
avalon:15962
avalon:15964
avalon:15966
avalon:15976
avalon:15978
avalon:15982
avalon:15984
avalon:15986
avalon:15990
avalon:15992
avalon:15996
avalon:15998
avalon:16000
avalon:16002
avalon:16004
avalon:16037
avalon:16039
avalon:16041
avalon:16043
avalon:16045
avalon:16068
avalon:16070
avalon:16072
avalon:16047
avalon:16018
avalon:16014
avalon:16010
avalon:16008
avalon:15988
avalon:15994
avalon:16006
avalon:16012
avalon:15874
avalon:15894
avalon:15954
avalon:15932
avalon:15968
avalon:15930
avalon:15972
avalon:15970
avalon:15860
avalon:15818
avalon:15826
avalon:15858
avalon:15868
avalon:15828
avalon:15856
avalon:13136
avalon:13126
avalon:13124
avalon:15814
avalon:15816
avalon:15800
avalon:15810
avalon:15808
avalon:13122
avalon:4459
avalon:4469
avalon:4493
avalon:4497
avalon:4501
avalon:4495
avalon:4499
avalon:4491
avalon:4505
avalon:4503
avalon:16574
avalon:16576
avalon:16617
avalon:16623
avalon:16589
avalon:16592
avalon:16594
avalon:16596
avalon:16569
avalon:16578
avalon:16667
avalon:16619
avalon:16621
avalon:16625
avalon:16627
avalon:16629
avalon:16631
avalon:4639
avalon:16712
avalon:16716
avalon:16714
avalon:5312
avalon:16720
avalon:16718
avalon:16722
avalon:16725
avalon:16727
avalon:16729
avalon:16731
avalon:16733
avalon:16735
avalon:16657
avalon:16659
avalon:16661
avalon:16663
avalon:16665
avalon:16669
avalon:16671
avalon:16673
avalon:16675
avalon:16677
avalon:4952
avalon:4950
avalon:16781
avalon:16786
avalon:16784
avalon:16790
avalon:16788
avalon:16794
avalon:16792
avalon:16797
avalon:16799
avalon:16838
avalon:16840
avalon:16834
avalon:16836
avalon:16846
avalon:16842
avalon:16844
avalon:16850
avalon:16848
avalon:16852
avalon:16855
avalon:16859
avalon:16864
avalon:16869
avalon:16952
avalon:16975
avalon:16987
avalon:17015
avalon:17039
avalon:17061
avalon:17079
avalon:17101
avalon:4946
avalon:17112
avalon:4944
avalon:17122
avalon:17147
avalon:4941
avalon:17165
avalon:17192
avalon:4939
avalon:17199
avalon:17211
avalon:17221
avalon:17241
avalon:17249
avalon:17258
avalon:17263
avalon:17281
avalon:17317
avalon:17327
avalon:17334
avalon:17358
avalon:17401
avalon:17415
avalon:17433
avalon:17453
avalon:17495
avalon:17519
avalon:17535
avalon:17562
avalon:17605
avalon:4936
avalon:17619
avalon:4934
avalon:17659
avalon:17696
        ', '\n+')"/>
    
    
    
</xsl:stylesheet>